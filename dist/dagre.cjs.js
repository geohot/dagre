var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Y=p((ti,D)=>{var q=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,r=t._prev;if(r!==t)return B(r),r}enqueue(t){let r=this._sentinel;t._prev&&t._next&&B(t),t._next=r._next,r._next._prev=t,r._next=t,t._prev=r}toString(){let t=[],r=this._sentinel,n=r._prev;for(;n!==r;)t.push(JSON.stringify(n,yt)),n=n._prev;return"["+t.join(", ")+"]"}};function B(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function yt(e,t){if(e!=="_next"&&e!=="_prev")return t}D.exports=q});var W=p((ri,A)=>{var vt=require("@dagrejs/graphlib").Graph,Nt=Y();A.exports=It;var Ot=()=>1;function It(e,t){if(e.nodeCount()<=1)return[];let r=Lt(e,t||Ot);return qt(r.graph,r.buckets,r.zeroIdx).flatMap(i=>e.outEdges(i.v,i.w))}function qt(e,t,r){let n=[],i=t[t.length-1],a=t[0],o;for(;e.nodeCount();){for(;o=a.dequeue();)L(e,t,r,o);for(;o=i.dequeue();)L(e,t,r,o);if(e.nodeCount()){for(let l=t.length-2;l>0;--l)if(o=t[l].dequeue(),o){n=n.concat(L(e,t,r,o,!0));break}}}return n}function L(e,t,r,n,i){let a=i?[]:void 0;return e.inEdges(n.v).forEach(o=>{let l=e.edge(o),d=e.node(o.v);i&&a.push({v:o.v,w:o.w}),d.out-=l,R(t,r,d)}),e.outEdges(n.v).forEach(o=>{let l=e.edge(o),d=o.w,s=e.node(d);s.in-=l,R(t,r,s)}),e.removeNode(n.v),a}function Lt(e,t){let r=new vt,n=0,i=0;e.nodes().forEach(l=>{r.setNode(l,{v:l,in:0,out:0})}),e.edges().forEach(l=>{let d=r.edge(l.v,l.w)||0,s=t(l),u=d+s;r.setEdge(l.v,l.w,u),i=Math.max(i,r.node(l.v).out+=s),n=Math.max(n,r.node(l.w).in+=s)});let a=Rt(i+n+3).map(()=>new Nt),o=n+1;return r.nodes().forEach(l=>{R(a,o,r.node(l))}),{graph:r,buckets:a,zeroIdx:o}}function R(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}function Rt(e){let t=[];for(let r=0;r<e;r++)t.push(r);return t}});var m=p((ni,K)=>{"use strict";var z=require("@dagrejs/graphlib").Graph;K.exports={addBorderNode:Gt,addDummyNode:X,applyWithChunking:v,asNonCompoundGraph:Mt,buildLayerMatrix:St,intersectRect:_t,mapValues:Wt,maxRank:U,normalizeRanks:Pt,notime:Dt,partition:Ft,pick:At,predecessorWeights:Tt,range:J,removeEmptyRanks:Vt,simplify:Ct,successorWeights:jt,time:Bt,uniqueId:H,zipObject:C};function X(e,t,r,n){for(var i=n;e.hasNode(i);)i=H(n);return r.dummy=t,e.setNode(i,r),i}function Ct(e){let t=new z().setGraph(e.graph());return e.nodes().forEach(r=>t.setNode(r,e.node(r))),e.edges().forEach(r=>{let n=t.edge(r.v,r.w)||{weight:0,minlen:1},i=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),t}function Mt(e){let t=new z({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(r=>{e.children(r).length||t.setNode(r,e.node(r))}),e.edges().forEach(r=>{t.setEdge(r,e.edge(r))}),t}function jt(e){let t=e.nodes().map(r=>{let n={};return e.outEdges(r).forEach(i=>{n[i.w]=(n[i.w]||0)+e.edge(i).weight}),n});return C(e.nodes(),t)}function Tt(e){let t=e.nodes().map(r=>{let n={};return e.inEdges(r).forEach(i=>{n[i.v]=(n[i.v]||0)+e.edge(i).weight}),n});return C(e.nodes(),t)}function _t(e,t){let r=e.x,n=e.y,i=t.x-r,a=t.y-n,o=e.width/2,l=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");let d,s;return Math.abs(a)*o>Math.abs(i)*l?(a<0&&(l=-l),d=l*i/a,s=l):(i<0&&(o=-o),d=o,s=o*a/i),{x:r+d,y:n+s}}function St(e){let t=J(U(e)+1).map(()=>[]);return e.nodes().forEach(r=>{let n=e.node(r),i=n.rank;i!==void 0&&(t[i][n.order]=r)}),t}function Pt(e){let t=e.nodes().map(n=>{let i=e.node(n).rank;return i===void 0?Number.MAX_VALUE:i}),r=v(Math.min,t);e.nodes().forEach(n=>{let i=e.node(n);Object.hasOwn(i,"rank")&&(i.rank-=r)})}function Vt(e){let t=e.nodes().map(o=>e.node(o).rank).filter(o=>o!==void 0),r=v(Math.min,t),n=[];e.nodes().forEach(o=>{let l=e.node(o).rank-r;n[l]||(n[l]=[]),n[l].push(o)});let i=0,a=e.graph().nodeRankFactor;Array.from(n).forEach((o,l)=>{o===void 0&&l%a!==0?--i:o!==void 0&&i&&o.forEach(d=>e.node(d).rank+=i)})}function Gt(e,t,r,n){let i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),X(e,"border",i,t)}function v(e,t){if(t.length===0)return e();let r=t[0];for(let n=1;n<t.length;n++)r=e(r,t[n]);return r}function U(e){let r=e.nodes().map(n=>{let i=e.node(n).rank;return i===void 0?Number.MIN_VALUE:i});return v(Math.max,r)}function Ft(e,t){let r={lhs:[],rhs:[]};return e.forEach(n=>{t(n)?r.lhs.push(n):r.rhs.push(n)}),r}function Bt(e,t){let r=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-r)+"ms")}}function Dt(e,t){return t()}var Yt=0;function H(e){var t=++Yt;return e+(""+t)}function J(e,t,r=1){t==null&&(t=e,e=0);let n=a=>a<t;r<0&&(n=a=>t<a);let i=[];for(let a=e;n(a);a+=r)i.push(a);return i}function At(e,t){let r={};for(let n of t)e[n]!==void 0&&(r[n]=e[n]);return r}function Wt(e,t){let r=t;return typeof t=="string"&&(r=n=>n[t]),Object.entries(e).reduce((n,[i,a])=>(n[i]=r(a,i),n),{})}function C(e,t){return e.reduce((r,n,i)=>(r[n]=t[i],r),{})}});var Z=p((ii,Q)=>{"use strict";var zt=W(),Xt=m().uniqueId;Q.exports={run:Ut,undo:Jt};function Ut(e){(e.graph().acyclicer==="greedy"?zt(e,r(e)):Ht(e)).forEach(n=>{let i=e.edge(n);e.removeEdge(n),i.forwardName=n.name,i.reversed=!0,e.setEdge(n.w,n.v,i,Xt("rev"))});function r(n){return i=>n.edge(i).weight}}function Ht(e){let t=[],r={},n={};function i(a){Object.hasOwn(n,a)||(n[a]=!0,r[a]=!0,e.outEdges(a).forEach(o=>{Object.hasOwn(r,o.w)?t.push(o):i(o.w)}),delete r[a])}return e.nodes().forEach(i),t}function Jt(e){e.edges().forEach(t=>{let r=e.edge(t);if(r.reversed){e.removeEdge(t);let n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})}});var ee=p((oi,$)=>{"use strict";var Kt=m();$.exports={run:Qt,undo:$t};function Qt(e){e.graph().dummyChains=[],e.edges().forEach(t=>Zt(e,t))}function Zt(e,t){let r=t.v,n=e.node(r).rank,i=t.w,a=e.node(i).rank,o=t.name,l=e.edge(t),d=l.labelRank;if(a===n+1)return;e.removeEdge(t);let s,u,h;for(h=0,++n;n<a;++h,++n)l.points=[],u={width:0,height:0,edgeLabel:l,edgeObj:t,rank:n},s=Kt.addDummyNode(e,"edge",u,"_d"),n===d&&(u.width=l.width,u.height=l.height,u.dummy="edge-label",u.labelpos=l.labelpos),e.setEdge(r,s,{weight:l.weight},o),h===0&&e.graph().dummyChains.push(s),r=s;e.setEdge(r,i,{weight:l.weight},o)}function $t(e){e.graph().dummyChains.forEach(t=>{let r=e.node(t),n=r.edgeLabel,i;for(e.setEdge(r.edgeObj,n);r.dummy;)i=e.successors(t)[0],e.removeNode(t),n.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),t=i,r=e.node(t)})}});var y=p((ai,te)=>{"use strict";var{applyWithChunking:er}=m();te.exports={longestPath:tr,slack:rr};function tr(e){var t={};function r(n){var i=e.node(n);if(Object.hasOwn(t,n))return i.rank;t[n]=!0;let a=e.outEdges(n).map(l=>l==null?Number.POSITIVE_INFINITY:r(l.w)-e.edge(l).minlen);var o=er(Math.min,a);return o===Number.POSITIVE_INFINITY&&(o=0),i.rank=o}e.sources().forEach(r)}function rr(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}});var M=p((li,re)=>{"use strict";var nr=require("@dagrejs/graphlib").Graph,N=y().slack;re.exports=ir;function ir(e){var t=new nr({directed:!1}),r=e.nodes()[0],n=e.nodeCount();t.setNode(r,{});for(var i,a;or(t,e)<n;)i=ar(t,e),a=t.hasNode(i.v)?N(e,i):-N(e,i),lr(t,e,a);return t}function or(e,t){function r(n){t.nodeEdges(n).forEach(i=>{var a=i.v,o=n===a?i.w:a;!e.hasNode(o)&&!N(t,i)&&(e.setNode(o,{}),e.setEdge(n,o,{}),r(o))})}return e.nodes().forEach(r),e.nodeCount()}function ar(e,t){return t.edges().reduce((n,i)=>{let a=Number.POSITIVE_INFINITY;return e.hasNode(i.v)!==e.hasNode(i.w)&&(a=N(t,i)),a<n[0]?[a,i]:n},[Number.POSITIVE_INFINITY,null])[1]}function lr(e,t,r){e.nodes().forEach(n=>t.node(n).rank+=r)}});var he=p((di,ue)=>{"use strict";var dr=M(),ne=y().slack,sr=y().longestPath,ur=require("@dagrejs/graphlib").alg.preorder,hr=require("@dagrejs/graphlib").alg.postorder,fr=m().simplify;ue.exports=x;x.initLowLimValues=T;x.initCutValues=j;x.calcCutValue=oe;x.leaveEdge=le;x.enterEdge=de;x.exchangeEdges=se;function x(e){e=fr(e),sr(e);var t=dr(e);T(t),j(t,e);for(var r,n;r=le(t);)n=de(t,e,r),se(t,e,r,n)}function j(e,t){var r=hr(e,e.nodes());r=r.slice(0,r.length-1),r.forEach(n=>cr(e,t,n))}function cr(e,t,r){var n=e.node(r),i=n.parent;e.edge(r,i).cutvalue=oe(e,t,r)}function oe(e,t,r){var n=e.node(r),i=n.parent,a=!0,o=t.edge(r,i),l=0;return o||(a=!1,o=t.edge(i,r)),l=o.weight,t.nodeEdges(r).forEach(d=>{var s=d.v===r,u=s?d.w:d.v;if(u!==i){var h=s===a,f=t.edge(d).weight;if(l+=h?f:-f,mr(e,r,u)){var c=e.edge(r,u).cutvalue;l+=h?-c:c}}}),l}function T(e,t){arguments.length<2&&(t=e.nodes()[0]),ae(e,{},1,t)}function ae(e,t,r,n,i){var a=r,o=e.node(n);return t[n]=!0,e.neighbors(n).forEach(l=>{Object.hasOwn(t,l)||(r=ae(e,t,r,l,n))}),o.low=a,o.lim=r++,i?o.parent=i:delete o.parent,r}function le(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function de(e,t,r){var n=r.v,i=r.w;t.hasEdge(n,i)||(n=r.w,i=r.v);var a=e.node(n),o=e.node(i),l=a,d=!1;a.lim>o.lim&&(l=o,d=!0);var s=t.edges().filter(u=>d===ie(e,e.node(u.v),l)&&d!==ie(e,e.node(u.w),l));return s.reduce((u,h)=>ne(t,h)<ne(t,u)?h:u)}function se(e,t,r,n){var i=r.v,a=r.w;e.removeEdge(i,a),e.setEdge(n.v,n.w,{}),T(e),j(e,t),pr(e,t)}function pr(e,t){var r=e.nodes().find(i=>!t.node(i).parent),n=ur(e,r);n=n.slice(1),n.forEach(i=>{var a=e.node(i).parent,o=t.edge(i,a),l=!1;o||(o=t.edge(a,i),l=!0),t.node(i).rank=t.node(a).rank+(l?o.minlen:-o.minlen)})}function mr(e,t,r){return e.hasEdge(t,r)}function ie(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}});var me=p((si,pe)=>{"use strict";var br=y(),ce=br.longestPath,wr=M(),Er=he();pe.exports=gr;function gr(e){var t=e.graph().ranker;if(t instanceof Function)return t(e);switch(e.graph().ranker){case"network-simplex":fe(e);break;case"tight-tree":xr(e);break;case"longest-path":kr(e);break;case"none":break;default:fe(e)}}var kr=ce;function xr(e){ce(e),wr(e)}function fe(e){Er(e)}});var we=p((ui,be)=>{be.exports=yr;function yr(e){let t=Nr(e);e.graph().dummyChains.forEach(r=>{let n=e.node(r),i=n.edgeObj,a=vr(e,t,i.v,i.w),o=a.path,l=a.lca,d=0,s=o[d],u=!0;for(;r!==i.w;){if(n=e.node(r),u){for(;(s=o[d])!==l&&e.node(s).maxRank<n.rank;)d++;s===l&&(u=!1)}if(!u){for(;d<o.length-1&&e.node(s=o[d+1]).minRank<=n.rank;)d++;s=o[d]}e.setParent(r,s),r=e.successors(r)[0]}})}function vr(e,t,r,n){let i=[],a=[],o=Math.min(t[r].low,t[n].low),l=Math.max(t[r].lim,t[n].lim),d,s;d=r;do d=e.parent(d),i.push(d);while(d&&(t[d].low>o||l>t[d].lim));for(s=d,d=n;(d=e.parent(d))!==s;)a.push(d);return{path:i.concat(a.reverse()),lca:s}}function Nr(e){let t={},r=0;function n(i){let a=r;e.children(i).forEach(n),t[i]={low:a,lim:r++}}return e.children().forEach(n),t}});var ke=p((hi,ge)=>{var O=m();ge.exports={run:Or,cleanup:Lr};function Or(e){let t=O.addDummyNode(e,"root",{},"_root"),r=Ir(e),n=Object.values(r),i=O.applyWithChunking(Math.max,n)-1,a=2*i+1;e.graph().nestingRoot=t,e.edges().forEach(l=>e.edge(l).minlen*=a);let o=qr(e)+1;e.children().forEach(l=>Ee(e,t,a,o,i,r,l)),e.graph().nodeRankFactor=a}function Ee(e,t,r,n,i,a,o){let l=e.children(o);if(!l.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:r});return}let d=O.addBorderNode(e,"_bt"),s=O.addBorderNode(e,"_bb"),u=e.node(o);e.setParent(d,o),u.borderTop=d,e.setParent(s,o),u.borderBottom=s,l.forEach(h=>{Ee(e,t,r,n,i,a,h);let f=e.node(h),c=f.borderTop?f.borderTop:h,b=f.borderBottom?f.borderBottom:h,w=f.borderTop?n:2*n,k=c!==b?1:i-a[o]+1;e.setEdge(d,c,{weight:w,minlen:k,nestingEdge:!0}),e.setEdge(b,s,{weight:w,minlen:k,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,d,{weight:0,minlen:i+a[o]})}function Ir(e){var t={};function r(n,i){var a=e.children(n);a&&a.length&&a.forEach(o=>r(o,i+1)),t[n]=i}return e.children().forEach(n=>r(n,1)),t}function qr(e){return e.edges().reduce((t,r)=>t+e.edge(r).weight,0)}function Lr(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(r=>{var n=e.edge(r);n.nestingEdge&&e.removeEdge(r)})}});var ve=p((fi,ye)=>{var Rr=m();ye.exports=Cr;function Cr(e){function t(r){let n=e.children(r),i=e.node(r);if(n.length&&n.forEach(t),Object.hasOwn(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(let a=i.minRank,o=i.maxRank+1;a<o;++a)xe(e,"borderLeft","_bl",r,i,a),xe(e,"borderRight","_br",r,i,a)}}e.children().forEach(t)}function xe(e,t,r,n,i,a){let o={width:0,height:0,rank:a,borderType:t},l=i[t][a-1],d=Rr.addDummyNode(e,"border",o,r);i[t][a]=d,e.setParent(d,n),l&&e.setEdge(l,d,{weight:1})}});var qe=p((ci,Ie)=>{"use strict";Ie.exports={adjust:Mr,undo:jr};function Mr(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Oe(e)}function jr(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Tr(e),(t==="lr"||t==="rl")&&(_r(e),Oe(e))}function Oe(e){e.nodes().forEach(t=>Ne(e.node(t))),e.edges().forEach(t=>Ne(e.edge(t)))}function Ne(e){let t=e.width;e.width=e.height,e.height=t}function Tr(e){e.nodes().forEach(t=>_(e.node(t))),e.edges().forEach(t=>{let r=e.edge(t);r.points.forEach(_),Object.hasOwn(r,"y")&&_(r)})}function _(e){e.y=-e.y}function _r(e){e.nodes().forEach(t=>S(e.node(t))),e.edges().forEach(t=>{let r=e.edge(t);r.points.forEach(S),Object.hasOwn(r,"x")&&S(r)})}function S(e){let t=e.x;e.x=e.y,e.y=t}});var Ce=p((pi,Re)=>{"use strict";var Le=m();Re.exports=Sr;function Sr(e){let t={},r=e.nodes().filter(d=>!e.children(d).length),n=r.map(d=>e.node(d).rank),i=Le.applyWithChunking(Math.max,n),a=Le.range(i+1).map(()=>[]);function o(d){if(t[d])return;t[d]=!0;let s=e.node(d);a[s.rank].push(d),e.successors(d).forEach(o)}return r.sort((d,s)=>e.node(d).rank-e.node(s).rank).forEach(o),a}});var je=p((mi,Me)=>{"use strict";var Pr=m().zipObject;Me.exports=Vr;function Vr(e,t){let r=0;for(let n=1;n<t.length;++n)r+=Gr(e,t[n-1],t[n]);return r}function Gr(e,t,r){let n=Pr(r,r.map((s,u)=>u)),i=t.flatMap(s=>e.outEdges(s).map(u=>({pos:n[u.w],weight:e.edge(u).weight})).sort((u,h)=>u.pos-h.pos)),a=1;for(;a<r.length;)a<<=1;let o=2*a-1;a-=1;let l=new Array(o).fill(0),d=0;return i.forEach(s=>{let u=s.pos+a;l[u]+=s.weight;let h=0;for(;u>0;)u%2&&(h+=l[u+1]),u=u-1>>1,l[u]+=s.weight;d+=s.weight*h}),d}});var _e=p((bi,Te)=>{Te.exports=Fr;function Fr(e,t=[]){return t.map(r=>{let n=e.inEdges(r);if(n.length){let i=n.reduce((a,o)=>{let l=e.edge(o),d=e.node(o.v);return{sum:a.sum+l.weight*d.order,weight:a.weight+l.weight}},{sum:0,weight:0});return{v:r,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:r}})}});var Pe=p((wi,Se)=>{"use strict";var Br=m();Se.exports=Dr;function Dr(e,t){let r={};e.forEach((i,a)=>{let o=r[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};i.barycenter!==void 0&&(o.barycenter=i.barycenter,o.weight=i.weight)}),t.edges().forEach(i=>{let a=r[i.v],o=r[i.w];a!==void 0&&o!==void 0&&(o.indegree++,a.out.push(r[i.w]))});let n=Object.values(r).filter(i=>!i.indegree);return Yr(n)}function Yr(e){let t=[];function r(i){return a=>{a.merged||(a.barycenter===void 0||i.barycenter===void 0||a.barycenter>=i.barycenter)&&Ar(i,a)}}function n(i){return a=>{a.in.push(i),--a.indegree===0&&e.push(a)}}for(;e.length;){let i=e.pop();t.push(i),i.in.reverse().forEach(r(i)),i.out.forEach(n(i))}return t.filter(i=>!i.merged).map(i=>Br.pick(i,["vs","i","barycenter","weight"]))}function Ar(e,t){let r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}});var Fe=p((Ei,Ge)=>{var Wr=m();Ge.exports=zr;function zr(e,t){let r=Wr.partition(e,u=>Object.hasOwn(u,"barycenter")),n=r.lhs,i=r.rhs.sort((u,h)=>h.i-u.i),a=[],o=0,l=0,d=0;n.sort(Xr(!!t)),d=Ve(a,i,d),n.forEach(u=>{d+=u.vs.length,a.push(u.vs),o+=u.barycenter*u.weight,l+=u.weight,d=Ve(a,i,d)});let s={vs:a.flat(!0)};return l&&(s.barycenter=o/l,s.weight=l),s}function Ve(e,t,r){let n;for(;t.length&&(n=t[t.length-1]).i<=r;)t.pop(),e.push(n.vs),r++;return r}function Xr(e){return(t,r)=>t.barycenter<r.barycenter?-1:t.barycenter>r.barycenter?1:e?r.i-t.i:t.i-r.i}});var Ye=p((gi,De)=>{var Ur=_e(),Hr=Pe(),Jr=Fe();De.exports=Be;function Be(e,t,r,n){let i=e.children(t),a=e.node(t),o=a?a.borderLeft:void 0,l=a?a.borderRight:void 0,d={};o&&(i=i.filter(f=>f!==o&&f!==l));let s=Ur(e,i);s.forEach(f=>{if(e.children(f.v).length){let c=Be(e,f.v,r,n);d[f.v]=c,Object.hasOwn(c,"barycenter")&&Qr(f,c)}});let u=Hr(s,r);Kr(u,d);let h=Jr(u,n);if(o&&(h.vs=[o,h.vs,l].flat(!0),e.predecessors(o).length)){let f=e.node(e.predecessors(o)[0]),c=e.node(e.predecessors(l)[0]);Object.hasOwn(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+f.order+c.order)/(h.weight+2),h.weight+=2}return h}function Kr(e,t){e.forEach(r=>{r.vs=r.vs.flatMap(n=>t[n]?t[n].vs:n)})}function Qr(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}});var We=p((ki,Ae)=>{var Zr=require("@dagrejs/graphlib").Graph,$r=m();Ae.exports=en;function en(e,t,r,n){n||(n=e.nodes());let i=tn(e),a=new Zr({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(o=>e.node(o));return n.forEach(o=>{let l=e.node(o),d=e.parent(o);(l.rank===t||l.minRank<=t&&t<=l.maxRank)&&(a.setNode(o),a.setParent(o,d||i),e[r](o).forEach(s=>{let u=s.v===o?s.w:s.v,h=a.edge(u,o),f=h!==void 0?h.weight:0;a.setEdge(u,o,{weight:e.edge(s).weight+f})}),Object.hasOwn(l,"minRank")&&a.setNode(o,{borderLeft:l.borderLeft[t],borderRight:l.borderRight[t]}))}),a}function tn(e){for(var t;e.hasNode(t=$r.uniqueId("_root")););return t}});var Xe=p((xi,ze)=>{ze.exports=rn;function rn(e,t,r){let n={},i;r.forEach(a=>{let o=e.parent(a),l,d;for(;o;){if(l=e.parent(o),l?(d=n[l],n[l]=o):(d=i,i=o),d&&d!==o){t.setEdge(d,o);return}o=l}})}});var Qe=p((yi,Ke)=>{"use strict";var nn=Ce(),on=je(),an=Ye(),ln=We(),dn=Xe(),sn=require("@dagrejs/graphlib").Graph,I=m();Ke.exports=Je;function Je(e,t={}){if(typeof t.customOrder=="function"){t.customOrder(e,Je);return}let r=I.maxRank(e),n=Ue(e,I.range(1,r+1),"inEdges"),i=Ue(e,I.range(r-1,-1,-1),"outEdges"),a=nn(e);if(He(e,a),t.disableOptimalOrderHeuristic)return;let o=Number.POSITIVE_INFINITY,l,d=t.constraints||[];for(let s=0,u=0;u<4;++s,++u){un(s%2?n:i,s%4>=2,d),a=I.buildLayerMatrix(e);let h=on(e,a);h<o?(u=0,l=Object.assign({},a),o=h):h===o&&(l=structuredClone(a))}He(e,l)}function Ue(e,t,r){let n=new Map,i=(a,o)=>{n.has(a)||n.set(a,[]),n.get(a).push(o)};for(let a of e.nodes()){let o=e.node(a);if(typeof o.rank=="number"&&i(o.rank,a),typeof o.minRank=="number"&&typeof o.maxRank=="number")for(let l=o.minRank;l<=o.maxRank;l++)l!==o.rank&&i(l,a)}return t.map(function(a){return ln(e,a,r,n.get(a)||[])})}function un(e,t,r){let n=new sn;e.forEach(function(i){r.forEach(l=>n.setEdge(l.left,l.right));let a=i.graph().root,o=an(i,a,n,t);o.vs.forEach((l,d)=>i.node(l).order=d),dn(i,n,o.vs)})}function He(e,t){Object.values(t).forEach(r=>r.forEach((n,i)=>e.node(n).order=i))}});var lt=p((vi,at)=>{"use strict";var hn=require("@dagrejs/graphlib").Graph,g=m();at.exports={positionX:pn,findType1Conflicts:Ze,findType2Conflicts:$e,addConflict:P,hasConflict:et,verticalAlignment:tt,horizontalCompaction:rt,alignCoordinates:it,findSmallestWidthAlignment:nt,balance:ot};function Ze(e,t){let r={};function n(i,a){let o=0,l=0,d=i.length,s=a[a.length-1];return a.forEach((u,h)=>{let f=fn(e,u),c=f?e.node(f).order:d;(f||u===s)&&(a.slice(l,h+1).forEach(b=>{e.predecessors(b).forEach(w=>{let k=e.node(w),F=k.order;(F<o||c<F)&&!(k.dummy&&e.node(b).dummy)&&P(r,w,b)})}),l=h+1,o=c)}),a}return t.length&&t.reduce(n),r}function $e(e,t){let r={};function n(a,o,l,d,s){let u;g.range(o,l).forEach(h=>{u=a[h],e.node(u).dummy&&e.predecessors(u).forEach(f=>{let c=e.node(f);c.dummy&&(c.order<d||c.order>s)&&P(r,f,u)})})}function i(a,o){let l=-1,d,s=0;return o.forEach((u,h)=>{if(e.node(u).dummy==="border"){let f=e.predecessors(u);f.length&&(d=e.node(f[0]).order,n(o,s,h,l,d),s=h,l=d)}n(o,s,o.length,d,a.length)}),o}return t.length&&t.reduce(i),r}function fn(e,t){if(e.node(t).dummy)return e.predecessors(t).find(r=>e.node(r).dummy)}function P(e,t,r){if(t>r){let i=t;t=r,r=i}let n=e[t];n||(e[t]=n={}),n[r]=!0}function et(e,t,r){if(t>r){let n=t;t=r,r=n}return!!e[t]&&Object.hasOwn(e[t],r)}function tt(e,t,r,n){let i={},a={},o={};return t.forEach(l=>{l.forEach((d,s)=>{i[d]=d,a[d]=d,o[d]=s})}),t.forEach(l=>{let d=-1;l.forEach(s=>{let u=n(s);if(u.length){u=u.sort((f,c)=>o[f]-o[c]);let h=(u.length-1)/2;for(let f=Math.floor(h),c=Math.ceil(h);f<=c;++f){let b=u[f];a[s]===s&&d<o[b]&&!et(r,s,b)&&(a[b]=s,a[s]=i[s]=i[b],d=o[b])}}})}),{root:i,align:a}}function rt(e,t,r,n,i){let a={},o=cn(e,t,r,i),l=i?"borderLeft":"borderRight";function d(h,f){let c=o.nodes().slice(),b={},w=c.pop();for(;w;){if(b[w])h(w);else{b[w]=!0,c.push(w);for(let k of f(w))c.push(k)}w=c.pop()}}function s(h){a[h]=o.inEdges(h).reduce((f,c)=>Math.max(f,a[c.v]+o.edge(c)),0)}function u(h){let f=o.outEdges(h).reduce((b,w)=>Math.min(b,a[w.w]-o.edge(w)),Number.POSITIVE_INFINITY),c=e.node(h);f!==Number.POSITIVE_INFINITY&&c.borderType!==l&&(a[h]=Math.max(a[h],f))}return d(s,o.predecessors.bind(o)),d(u,o.successors.bind(o)),Object.keys(n).forEach(h=>a[h]=a[r[h]]),a}function cn(e,t,r,n){let i=new hn,a=e.graph(),o=mn(a.nodesep,a.edgesep,n);return t.forEach(l=>{let d;l.forEach(s=>{let u=r[s];if(i.setNode(u),d){var h=r[d],f=i.edge(h,u);i.setEdge(h,u,Math.max(o(e,s,d),f||0))}d=s})}),i}function nt(e,t){return Object.values(t).reduce((r,n)=>{let i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;Object.entries(n).forEach(([l,d])=>{let s=bn(e,l)/2;i=Math.max(d+s,i),a=Math.min(d-s,a)});let o=i-a;return o<r[0]&&(r=[o,n]),r},[Number.POSITIVE_INFINITY,null])[1]}function it(e,t){let r=Object.values(t),n=g.applyWithChunking(Math.min,r),i=g.applyWithChunking(Math.max,r);["u","d"].forEach(a=>{["l","r"].forEach(o=>{let l=a+o,d=e[l];if(d===t)return;let s=Object.values(d),u=n-g.applyWithChunking(Math.min,s);o!=="l"&&(u=i-g.applyWithChunking(Math.max,s)),u&&(e[l]=g.mapValues(d,h=>h+u))})})}function ot(e,t){return g.mapValues(e.ul,(r,n)=>{if(t)return e[t.toLowerCase()][n];{let i=Object.values(e).map(a=>a[n]).sort((a,o)=>a-o);return(i[1]+i[2])/2}})}function pn(e){let t=g.buildLayerMatrix(e),r=Object.assign(Ze(e,t),$e(e,t)),n={},i;["u","d"].forEach(o=>{i=o==="u"?t:Object.values(t).reverse(),["l","r"].forEach(l=>{l==="r"&&(i=i.map(h=>Object.values(h).reverse()));let d=(o==="u"?e.predecessors:e.successors).bind(e),s=tt(e,i,r,d),u=rt(e,i,s.root,s.align,l==="r");l==="r"&&(u=g.mapValues(u,h=>-h)),n[o+l]=u})});let a=nt(e,n);return it(n,a),ot(n,e.graph().align)}function mn(e,t,r){return(n,i,a)=>{let o=n.node(i),l=n.node(a),d=0,s;if(d+=o.width/2,Object.hasOwn(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":s=-o.width/2;break;case"r":s=o.width/2;break}if(s&&(d+=r?s:-s),s=0,d+=(o.dummy?t:e)/2,d+=(l.dummy?t:e)/2,d+=l.width/2,Object.hasOwn(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=l.width/2;break;case"r":s=-l.width/2;break}return s&&(d+=r?s:-s),s=0,d}}function bn(e,t){return e.node(t).width}});var ut=p((Ni,st)=>{"use strict";var dt=m(),wn=lt().positionX;st.exports=En;function En(e){e=dt.asNonCompoundGraph(e),gn(e),Object.entries(wn(e)).forEach(([t,r])=>e.node(t).x=r)}function gn(e){let t=dt.buildLayerMatrix(e),r=e.graph().ranksep,n=e.graph().rankalign,i=0;t.forEach(a=>{let o=a.reduce((l,d)=>{let s=e.node(d).height;return l>s?l:s},0);a.forEach(l=>{let d=e.node(l);n==="top"?d.y=i+d.height/2:n==="bottom"?d.y=i+o-d.height/2:d.y=i+o/2}),i+=o+r})}});var wt=p((Oi,bt)=>{"use strict";var ht=Z(),ft=ee(),kn=me(),xn=m().normalizeRanks,yn=we(),vn=m().removeEmptyRanks,ct=ke(),Nn=ve(),pt=qe(),On=Qe(),In=ut(),E=m(),qn=require("@dagrejs/graphlib").Graph;bt.exports=Ln;function Ln(e,t={}){let r=t.debugTiming?E.time:E.notime;return r("layout",()=>{let n=r("  buildLayoutGraph",()=>Gn(e));return r("  runLayout",()=>Rn(n,r,t)),r("  updateInputGraph",()=>Cn(e,n)),n})}function Rn(e,t,r){t("    makeSpaceForEdgeLabels",()=>Fn(e)),t("    removeSelfEdges",()=>Hn(e)),t("    acyclic",()=>ht.run(e)),t("    nestingGraph.run",()=>ct.run(e)),t("    rank",()=>kn(E.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>Bn(e)),t("    removeEmptyRanks",()=>vn(e)),t("    nestingGraph.cleanup",()=>ct.cleanup(e)),t("    normalizeRanks",()=>xn(e)),t("    assignRankMinMax",()=>Dn(e)),t("    removeEdgeLabelProxies",()=>Yn(e)),t("    normalize.run",()=>ft.run(e)),t("    parentDummyChains",()=>yn(e)),t("    addBorderSegments",()=>Nn(e)),t("    order",()=>On(e,r)),t("    insertSelfEdges",()=>Jn(e)),t("    adjustCoordinateSystem",()=>pt.adjust(e)),t("    position",()=>In(e)),t("    positionSelfEdges",()=>Kn(e)),t("    removeBorderNodes",()=>Un(e)),t("    normalize.undo",()=>ft.undo(e)),t("    fixupEdgeLabelCoords",()=>zn(e)),t("    undoCoordinateSystem",()=>pt.undo(e)),t("    translateGraph",()=>An(e)),t("    assignNodeIntersects",()=>Wn(e)),t("    reversePoints",()=>Xn(e)),t("    acyclic.undo",()=>ht.undo(e))}function Cn(e,t){e.nodes().forEach(r=>{let n=e.node(r),i=t.node(r);n&&(n.x=i.x,n.y=i.y,n.order=i.order,n.rank=i.rank,t.children(r).length&&(n.width=i.width,n.height=i.height))}),e.edges().forEach(r=>{let n=e.edge(r),i=t.edge(r);n.points=i.points,Object.hasOwn(i,"x")&&(n.x=i.x,n.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var Mn=["nodesep","edgesep","ranksep","marginx","marginy"],jn={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb",rankalign:"center"},Tn=["acyclicer","ranker","rankdir","align","rankalign"],_n=["width","height","rank"],mt={width:0,height:0},Sn=["minlen","weight","width","height","labeloffset"],Pn={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Vn=["labelpos"];function Gn(e){let t=new qn({multigraph:!0,compound:!0}),r=G(e.graph());return t.setGraph(Object.assign({},jn,V(r,Mn),E.pick(r,Tn))),e.nodes().forEach(n=>{let i=G(e.node(n)),a=V(i,_n);Object.keys(mt).forEach(o=>{a[o]===void 0&&(a[o]=mt[o])}),t.setNode(n,a),t.setParent(n,e.parent(n))}),e.edges().forEach(n=>{let i=G(e.edge(n));t.setEdge(n,Object.assign({},Pn,V(i,Sn),E.pick(i,Vn)))}),t}function Fn(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(r=>{let n=e.edge(r);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function Bn(e){e.edges().forEach(t=>{let r=e.edge(t);if(r.width&&r.height){let n=e.node(t.v),a={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};E.addDummyNode(e,"edge-proxy",a,"_ep")}})}function Dn(e){let t=0;e.nodes().forEach(r=>{let n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=Math.max(t,n.maxRank))}),e.graph().maxRank=t}function Yn(e){e.nodes().forEach(t=>{let r=e.node(t);r.dummy==="edge-proxy"&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}function An(e){let t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,i=0,a=e.graph(),o=a.marginx||0,l=a.marginy||0;function d(s){let u=s.x,h=s.y,f=s.width,c=s.height;t=Math.min(t,u-f/2),r=Math.max(r,u+f/2),n=Math.min(n,h-c/2),i=Math.max(i,h+c/2)}e.nodes().forEach(s=>d(e.node(s))),e.edges().forEach(s=>{let u=e.edge(s);Object.hasOwn(u,"x")&&d(u)}),t-=o,n-=l,e.nodes().forEach(s=>{let u=e.node(s);u.x-=t,u.y-=n}),e.edges().forEach(s=>{let u=e.edge(s);u.points.forEach(h=>{h.x-=t,h.y-=n}),Object.hasOwn(u,"x")&&(u.x-=t),Object.hasOwn(u,"y")&&(u.y-=n)}),a.width=r-t+o,a.height=i-n+l}function Wn(e){e.edges().forEach(t=>{let r=e.edge(t),n=e.node(t.v),i=e.node(t.w),a,o;r.points?(a=r.points[0],o=r.points[r.points.length-1]):(r.points=[],a=i,o=n),r.points.unshift(E.intersectRect(n,a)),r.points.push(E.intersectRect(i,o))})}function zn(e){e.edges().forEach(t=>{let r=e.edge(t);if(Object.hasOwn(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function Xn(e){e.edges().forEach(t=>{let r=e.edge(t);r.reversed&&r.points.reverse()})}function Un(e){e.nodes().forEach(t=>{if(e.children(t).length){let r=e.node(t),n=e.node(r.borderTop),i=e.node(r.borderBottom),a=e.node(r.borderLeft[r.borderLeft.length-1]),o=e.node(r.borderRight[r.borderRight.length-1]);r.width=Math.abs(o.x-a.x),r.height=Math.abs(i.y-n.y),r.x=a.x+r.width/2,r.y=n.y+r.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Hn(e){e.edges().forEach(t=>{if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Jn(e){var t=E.buildLayerMatrix(e);t.forEach(r=>{var n=0;r.forEach((i,a)=>{var o=e.node(i);o.order=a+n,(o.selfEdges||[]).forEach(l=>{E.addDummyNode(e,"selfedge",{width:l.label.width,height:l.label.height,rank:o.rank,order:a+ ++n,e:l.e,label:l.label},"_se")}),delete o.selfEdges})})}function Kn(e){e.nodes().forEach(t=>{var r=e.node(t);if(r.dummy==="selfedge"){var n=e.node(r.e.v),i=n.x+n.width/2,a=n.y,o=r.x-i,l=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:i+2*o/3,y:a-l},{x:i+5*o/6,y:a-l},{x:i+o,y:a},{x:i+5*o/6,y:a+l},{x:i+2*o/3,y:a+l}],r.label.x=r.x,r.label.y=r.y}})}function V(e,t){return E.mapValues(E.pick(e,t),Number)}function G(e){var t={};return e&&Object.entries(e).forEach(([r,n])=>{typeof r=="string"&&(r=r.toLowerCase()),t[r]=n}),t}});var gt=p((Ii,Et)=>{var Qn=m(),Zn=require("@dagrejs/graphlib").Graph;Et.exports={debugOrdering:$n};function $n(e){let t=Qn.buildLayerMatrix(e),r=new Zn({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(n=>{r.setNode(n,{label:n}),r.setParent(n,"layer"+e.node(n).rank)}),e.edges().forEach(n=>r.setEdge(n.v,n.w,{},n.name)),t.forEach((n,i)=>{let a="layer"+i;r.setNode(a,{rank:"same"}),n.reduce((o,l)=>(r.setEdge(o,l,{style:"invis"}),l))}),r}});var xt=p((qi,kt)=>{kt.exports="2.0.5-pre"});module.exports={graphlib:require("@dagrejs/graphlib"),layout:wt(),debug:gt(),util:{time:m().time,notime:m().notime},version:xt()};
/*! For license information please see dagre.cjs.js.LEGAL.txt */
//# sourceMappingURL=dagre.cjs.js.map
