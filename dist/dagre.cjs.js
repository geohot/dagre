var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var z=p((ii,W)=>{var R=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,r=t._prev;if(r!==t)return A(r),r}enqueue(t){let r=this._sentinel;t._prev&&t._next&&A(t),t._next=r._next,r._next._prev=t,r._next=t,t._prev=r}toString(){let t=[],r=this._sentinel,n=r._prev;for(;n!==r;)t.push(JSON.stringify(n,yt)),n=n._prev;return"["+t.join(", ")+"]"}};function A(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function yt(e,t){if(e!=="_next"&&e!=="_prev")return t}W.exports=R});var U=p((oi,X)=>{var Nt=require("@dagrejs/graphlib").Graph,Ot=z();X.exports=qt;var It=()=>1;function qt(e,t){if(e.nodeCount()<=1)return[];let r=Rt(e,t||It);return Lt(r.graph,r.buckets,r.zeroIdx).flatMap(i=>e.outEdges(i.v,i.w))}function Lt(e,t,r){let n=[],i=t[t.length-1],l=t[0],o;for(;e.nodeCount();){for(;o=l.dequeue();)C(e,t,r,o);for(;o=i.dequeue();)C(e,t,r,o);if(e.nodeCount()){for(let a=t.length-2;a>0;--a)if(o=t[a].dequeue(),o){n=n.concat(C(e,t,r,o,!0));break}}}return n}function C(e,t,r,n,i){let l=i?[]:void 0;return e.inEdges(n.v).forEach(o=>{let a=e.edge(o),s=e.node(o.v);i&&l.push({v:o.v,w:o.w}),s.out-=a,M(t,r,s)}),e.outEdges(n.v).forEach(o=>{let a=e.edge(o),s=o.w,d=e.node(s);d.in-=a,M(t,r,d)}),e.removeNode(n.v),l}function Rt(e,t){let r=new Nt,n=0,i=0;e.nodes().forEach(a=>{r.setNode(a,{v:a,in:0,out:0})}),e.edges().forEach(a=>{let s=r.edge(a.v,a.w)||0,d=t(a),u=s+d;r.setEdge(a.v,a.w,u),i=Math.max(i,r.node(a.v).out+=d),n=Math.max(n,r.node(a.w).in+=d)});let l=Ct(i+n+3).map(()=>new Ot),o=n+1;return r.nodes().forEach(a=>{M(l,o,r.node(a))}),{graph:r,buckets:l,zeroIdx:o}}function M(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}function Ct(e){let t=[];for(let r=0;r<e;r++)t.push(r);return t}});var E=p((li,$)=>{"use strict";var H=require("@dagrejs/graphlib").Graph;$.exports={addBorderNode:Ft,addDummyNode:J,applyWithChunking:O,asNonCompoundGraph:jt,buildLayerMatrix:Pt,intersectRect:St,mapValues:zt,maxRank:K,normalizeRanks:Gt,notime:Yt,partition:Bt,pick:Wt,predecessorWeights:_t,range:Z,removeEmptyRanks:Vt,simplify:Mt,successorWeights:Tt,time:Dt,uniqueId:Q,zipObject:j};function J(e,t,r,n){for(var i=n;e.hasNode(i);)i=Q(n);return r.dummy=t,e.setNode(i,r),i}function Mt(e){let t=new H().setGraph(e.graph());return e.nodes().forEach(r=>t.setNode(r,e.node(r))),e.edges().forEach(r=>{let n=t.edge(r.v,r.w)||{weight:0,minlen:1},i=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),t}function jt(e){let t=new H({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(r=>{e.children(r).length||t.setNode(r,e.node(r))}),e.edges().forEach(r=>{t.setEdge(r,e.edge(r))}),t}function Tt(e){let t=e.nodes().map(r=>{let n={};return e.outEdges(r).forEach(i=>{n[i.w]=(n[i.w]||0)+e.edge(i).weight}),n});return j(e.nodes(),t)}function _t(e){let t=e.nodes().map(r=>{let n={};return e.inEdges(r).forEach(i=>{n[i.v]=(n[i.v]||0)+e.edge(i).weight}),n});return j(e.nodes(),t)}function St(e,t){let r=e.x,n=e.y,i=t.x-r,l=t.y-n,o=e.width/2,a=e.height/2;if(!i&&!l)throw new Error("Not possible to find intersection inside of the rectangle");let s,d;return Math.abs(l)*o>Math.abs(i)*a?(l<0&&(a=-a),s=a*i/l,d=a):(i<0&&(o=-o),s=o,d=o*l/i),{x:r+s,y:n+d}}function Pt(e){let t=Z(K(e)+1).map(()=>[]);return e.nodes().forEach(r=>{let n=e.node(r),i=n.rank;i!==void 0&&(t[i][n.order]=r)}),t}function Gt(e){let t=e.nodes().map(n=>{let i=e.node(n).rank;return i===void 0?Number.MAX_VALUE:i}),r=O(Math.min,t);e.nodes().forEach(n=>{let i=e.node(n);Object.hasOwn(i,"rank")&&(i.rank-=r)})}function Vt(e){let t=e.nodes().map(o=>e.node(o).rank).filter(o=>o!==void 0),r=O(Math.min,t),n=[];e.nodes().forEach(o=>{let a=e.node(o).rank-r;n[a]||(n[a]=[]),n[a].push(o)});let i=0,l=e.graph().nodeRankFactor;Array.from(n).forEach((o,a)=>{o===void 0&&a%l!==0?--i:o!==void 0&&i&&o.forEach(s=>e.node(s).rank+=i)})}function Ft(e,t,r,n){let i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),J(e,"border",i,t)}function O(e,t){if(t.length===0)return e();let r=t[0];for(let n=1;n<t.length;n++)r=e(r,t[n]);return r}function K(e){let r=e.nodes().map(n=>{let i=e.node(n).rank;return i===void 0?Number.MIN_VALUE:i});return O(Math.max,r)}function Bt(e,t){let r={lhs:[],rhs:[]};return e.forEach(n=>{t(n)?r.lhs.push(n):r.rhs.push(n)}),r}function Dt(e,t){let r=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-r)+"ms")}}function Yt(e,t){return t()}var At=0;function Q(e){var t=++At;return e+(""+t)}function Z(e,t,r=1){t==null&&(t=e,e=0);let n=l=>l<t;r<0&&(n=l=>t<l);let i=[];for(let l=e;n(l);l+=r)i.push(l);return i}function Wt(e,t){let r={};for(let n of t)e[n]!==void 0&&(r[n]=e[n]);return r}function zt(e,t){let r=t;return typeof t=="string"&&(r=n=>n[t]),Object.entries(e).reduce((n,[i,l])=>(n[i]=r(l,i),n),{})}function j(e,t){return e.reduce((r,n,i)=>(r[n]=t[i],r),{})}});var te=p((ai,ee)=>{"use strict";var Xt=U(),Ut=E().uniqueId;ee.exports={run:Ht,undo:Kt};function Ht(e){(e.graph().acyclicer==="greedy"?Xt(e,r(e)):Jt(e)).forEach(n=>{let i=e.edge(n);e.removeEdge(n),i.forwardName=n.name,i.reversed=!0,e.setEdge(n.w,n.v,i,Ut("rev"))});function r(n){return i=>n.edge(i).weight}}function Jt(e){let t=[],r={},n={};function i(l){let o=[[l,0]];for(;o.length>0;){let[a,s]=o[o.length-1];if(s===0){if(Object.hasOwn(n,a)){o.pop();continue}n[a]=!0,r[a]=!0}let d=e.outEdges(a);if(s<d.length){o[o.length-1][1]=s+1;let u=d[s];Object.hasOwn(r,u.w)?t.push(u):o.push([u.w,0])}else delete r[a],o.pop()}}return e.nodes().forEach(i),t}function Kt(e){e.edges().forEach(t=>{let r=e.edge(t);if(r.reversed){e.removeEdge(t);let n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})}});var ne=p((si,re)=>{"use strict";var Qt=E();re.exports={run:Zt,undo:er};function Zt(e){e.graph().dummyChains=[],e.edges().forEach(t=>$t(e,t))}function $t(e,t){let r=t.v,n=e.node(r).rank,i=t.w,l=e.node(i).rank,o=t.name,a=e.edge(t),s=a.labelRank;if(l===n+1)return;e.removeEdge(t);let d,u,h;for(h=0,++n;n<l;++h,++n)a.points=[],u={width:0,height:0,edgeLabel:a,edgeObj:t,rank:n},d=Qt.addDummyNode(e,"edge",u,"_d"),n===s&&(u.width=a.width,u.height=a.height,u.dummy="edge-label",u.labelpos=a.labelpos),e.setEdge(r,d,{weight:a.weight},o),h===0&&e.graph().dummyChains.push(d),r=d;e.setEdge(r,i,{weight:a.weight},o)}function er(e){e.graph().dummyChains.forEach(t=>{let r=e.node(t),n=r.edgeLabel,i;for(e.setEdge(r.edgeObj,n);r.dummy;)i=e.successors(t)[0],e.removeNode(t),n.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),t=i,r=e.node(t)})}});var N=p((di,ie)=>{"use strict";var{applyWithChunking:tr}=E();ie.exports={longestPath:rr,slack:nr};function rr(e){var t={};function r(n){let i=[[n,!1]];for(;i.length>0;){let[a,s]=i[i.length-1];if(Object.hasOwn(t,a)){i.pop();continue}if(s){i.pop(),t[a]=!0;var l=e.node(a);let d=e.outEdges(a).map(u=>u==null?Number.POSITIVE_INFINITY:e.node(u.w).rank-e.edge(u).minlen);var o=tr(Math.min,d);o===Number.POSITIVE_INFINITY&&(o=0),l.rank=o}else{i[i.length-1][1]=!0;let d=e.outEdges(a);for(let u=d.length-1;u>=0;u--){let h=d[u];h!=null&&!Object.hasOwn(t,h.w)&&i.push([h.w,!1])}}}}e.sources().forEach(r)}function nr(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}});var T=p((ui,oe)=>{"use strict";var ir=require("@dagrejs/graphlib").Graph,I=N().slack;oe.exports=or;function or(e){var t=new ir({directed:!1}),r=e.nodes()[0],n=e.nodeCount();t.setNode(r,{});for(var i,l;lr(t,e)<n;)i=ar(t,e),l=t.hasNode(i.v)?I(e,i):-I(e,i),sr(t,e,l);return t}function lr(e,t){function r(n){let i=[n];for(;i.length>0;){let l=i.pop();t.nodeEdges(l).forEach(o=>{var a=o.v,s=l===a?o.w:a;!e.hasNode(s)&&!I(t,o)&&(e.setNode(s,{}),e.setEdge(l,s,{}),i.push(s))})}}return e.nodes().forEach(r),e.nodeCount()}function ar(e,t){return t.edges().reduce((n,i)=>{let l=Number.POSITIVE_INFINITY;return e.hasNode(i.v)!==e.hasNode(i.w)&&(l=I(t,i)),l<n[0]?[l,i]:n},[Number.POSITIVE_INFINITY,null])[1]}function sr(e,t,r){e.nodes().forEach(n=>t.node(n).rank+=r)}});var ce=p((hi,fe)=>{"use strict";var dr=T(),le=N().slack,ur=N().longestPath,hr=require("@dagrejs/graphlib").alg.preorder,fr=require("@dagrejs/graphlib").alg.postorder,cr=E().simplify;fe.exports=y;y.initLowLimValues=S;y.initCutValues=_;y.calcCutValue=se;y.leaveEdge=de;y.enterEdge=ue;y.exchangeEdges=he;function y(e){e=cr(e),ur(e);var t=dr(e);S(t),_(t,e);for(var r,n;r=de(t);)n=ue(t,e,r),he(t,e,r,n)}function _(e,t){var r=fr(e,e.nodes());r=r.slice(0,r.length-1),r.forEach(n=>pr(e,t,n))}function pr(e,t,r){var n=e.node(r),i=n.parent;e.edge(r,i).cutvalue=se(e,t,r)}function se(e,t,r){var n=e.node(r),i=n.parent,l=!0,o=t.edge(r,i),a=0;return o||(l=!1,o=t.edge(i,r)),a=o.weight,t.nodeEdges(r).forEach(s=>{var d=s.v===r,u=d?s.w:s.v;if(u!==i){var h=d===l,f=t.edge(s).weight;if(a+=h?f:-f,wr(e,r,u)){var c=e.edge(r,u).cutvalue;a+=h?-c:c}}}),a}function S(e,t){arguments.length<2&&(t=e.nodes()[0]),mr(e,{},1,t)}function mr(e,t,r,n,i){let l=[[n,i,0,r]];for(;l.length>0;){let o=l[l.length-1],[a,s,d,u]=o;d===0&&(t[a]=!0);let h=e.neighbors(a),f=!1;for(let c=d;c<h.length;c++){let b=h[c];if(!Object.hasOwn(t,b)){o[2]=c+1,l.push([b,a,0,r]),f=!0;break}}if(!f){let c=e.node(a);c.low=u,c.lim=r++,s?c.parent=s:delete c.parent,l.pop()}}return r}function de(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function ue(e,t,r){var n=r.v,i=r.w;t.hasEdge(n,i)||(n=r.w,i=r.v);var l=e.node(n),o=e.node(i),a=l,s=!1;l.lim>o.lim&&(a=o,s=!0);var d=t.edges().filter(u=>s===ae(e,e.node(u.v),a)&&s!==ae(e,e.node(u.w),a));return d.reduce((u,h)=>le(t,h)<le(t,u)?h:u)}function he(e,t,r,n){var i=r.v,l=r.w;e.removeEdge(i,l),e.setEdge(n.v,n.w,{}),S(e),_(e,t),br(e,t)}function br(e,t){var r=e.nodes().find(i=>!t.node(i).parent),n=hr(e,r);n=n.slice(1),n.forEach(i=>{var l=e.node(i).parent,o=t.edge(i,l),a=!1;o||(o=t.edge(l,i),a=!0),t.node(i).rank=t.node(l).rank+(a?o.minlen:-o.minlen)})}function wr(e,t,r){return e.hasEdge(t,r)}function ae(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}});var we=p((fi,be)=>{"use strict";var Er=N(),me=Er.longestPath,gr=T(),vr=ce();be.exports=kr;function kr(e){var t=e.graph().ranker;if(t instanceof Function)return t(e);switch(e.graph().ranker){case"network-simplex":pe(e);break;case"tight-tree":yr(e);break;case"longest-path":xr(e);break;case"none":break;default:pe(e)}}var xr=me;function yr(e){me(e),gr(e)}function pe(e){vr(e)}});var ge=p((ci,Ee)=>{Ee.exports=Nr;function Nr(e){let t=Ir(e);e.graph().dummyChains.forEach(r=>{let n=e.node(r),i=n.edgeObj,l=Or(e,t,i.v,i.w),o=l.path,a=l.lca,s=0,d=o[s],u=!0;for(;r!==i.w;){if(n=e.node(r),u){for(;(d=o[s])!==a&&e.node(d).maxRank<n.rank;)s++;d===a&&(u=!1)}if(!u){for(;s<o.length-1&&e.node(d=o[s+1]).minRank<=n.rank;)s++;d=o[s]}e.setParent(r,d),r=e.successors(r)[0]}})}function Or(e,t,r,n){let i=[],l=[],o=Math.min(t[r].low,t[n].low),a=Math.max(t[r].lim,t[n].lim),s,d;s=r;do s=e.parent(s),i.push(s);while(s&&(t[s].low>o||a>t[s].lim));for(d=s,s=n;(s=e.parent(s))!==d;)l.push(s);return{path:i.concat(l.reverse()),lca:d}}function Ir(e){let t={},r=0,n=[];for(e.children().forEach(i=>n.push([i,!1,0]));n.length>0;){let i=n[n.length-1],[l,o]=i;if(o)n.pop(),t[l]={low:i[2],lim:r++};else{i[1]=!0,i[2]=r;let a=e.children(l);for(let s=a.length-1;s>=0;s--)n.push([a[s],!1,0])}}return t}});var ke=p((pi,ve)=>{var q=E();ve.exports={run:qr,cleanup:Mr};function qr(e){let t=q.addDummyNode(e,"root",{},"_root"),r=Rr(e),n=Object.values(r),i=q.applyWithChunking(Math.max,n)-1,l=2*i+1;e.graph().nestingRoot=t,e.edges().forEach(a=>e.edge(a).minlen*=l);let o=Cr(e)+1;e.children().forEach(a=>Lr(e,t,l,o,i,r,a)),e.graph().nodeRankFactor=l}function Lr(e,t,r,n,i,l,o){let a=[[o,!1]];for(;a.length>0;){let s=a[a.length-1],[d,u]=s,h=e.children(d);if(!h.length){a.pop(),d!==t&&e.setEdge(t,d,{weight:0,minlen:r});continue}if(!u){s[1]=!0;for(let m=h.length-1;m>=0;m--)a.push([h[m],!1]);continue}a.pop();let f=q.addBorderNode(e,"_bt"),c=q.addBorderNode(e,"_bb"),b=e.node(d);e.setParent(f,d),b.borderTop=f,e.setParent(c,d),b.borderBottom=c,h.forEach(m=>{let w=e.node(m),g=w.borderTop?w.borderTop:m,x=w.borderBottom?w.borderBottom:m,D=w.borderTop?n:2*n,Y=g!==x?1:i-l[d]+1;e.setEdge(f,g,{weight:D,minlen:Y,nestingEdge:!0}),e.setEdge(x,c,{weight:D,minlen:Y,nestingEdge:!0})}),e.parent(d)||e.setEdge(t,f,{weight:0,minlen:i+l[d]})}}function Rr(e){var t={};let r=[];for(e.children().forEach(i=>r.push([i,1]));r.length>0;){let[i,l]=r.pop();var n=e.children(i);n&&n.length&&n.forEach(o=>r.push([o,l+1])),t[i]=l}return t}function Cr(e){return e.edges().reduce((t,r)=>t+e.edge(r).weight,0)}function Mr(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(r=>{var n=e.edge(r);n.nestingEdge&&e.removeEdge(r)})}});var Ne=p((mi,ye)=>{var jr=E();ye.exports=Tr;function Tr(e){let t=[];for(e.children().forEach(r=>t.push([r,!1]));t.length>0;){let r=t[t.length-1],[n,i]=r,l=e.children(n);if(l.length&&!i){r[1]=!0;for(let a=l.length-1;a>=0;a--)t.push([l[a],!1]);continue}t.pop();let o=e.node(n);if(Object.hasOwn(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(let a=o.minRank,s=o.maxRank+1;a<s;++a)xe(e,"borderLeft","_bl",n,o,a),xe(e,"borderRight","_br",n,o,a)}}}function xe(e,t,r,n,i,l){let o={width:0,height:0,rank:l,borderType:t},a=i[t][l-1],s=jr.addDummyNode(e,"border",o,r);i[t][l]=s,e.setParent(s,n),a&&e.setEdge(a,s,{weight:1})}});var Le=p((bi,qe)=>{"use strict";qe.exports={adjust:_r,undo:Sr};function _r(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Ie(e)}function Sr(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Pr(e),(t==="lr"||t==="rl")&&(Gr(e),Ie(e))}function Ie(e){e.nodes().forEach(t=>Oe(e.node(t))),e.edges().forEach(t=>Oe(e.edge(t)))}function Oe(e){let t=e.width;e.width=e.height,e.height=t}function Pr(e){e.nodes().forEach(t=>P(e.node(t))),e.edges().forEach(t=>{let r=e.edge(t);r.points.forEach(P),Object.hasOwn(r,"y")&&P(r)})}function P(e){e.y=-e.y}function Gr(e){e.nodes().forEach(t=>G(e.node(t))),e.edges().forEach(t=>{let r=e.edge(t);r.points.forEach(G),Object.hasOwn(r,"x")&&G(r)})}function G(e){let t=e.x;e.x=e.y,e.y=t}});var Me=p((wi,Ce)=>{"use strict";var Re=E();Ce.exports=Vr;function Vr(e){let t={},r=e.nodes().filter(s=>!e.children(s).length),n=r.map(s=>e.node(s).rank),i=Re.applyWithChunking(Math.max,n),l=Re.range(i+1).map(()=>[]);function o(s){let d=[s];for(;d.length>0;){let u=d.pop();if(t[u])continue;t[u]=!0;let h=e.node(u);l[h.rank].push(u);let f=e.successors(u);for(let c=f.length-1;c>=0;c--)d.push(f[c])}}return r.sort((s,d)=>e.node(s).rank-e.node(d).rank).forEach(o),l}});var Te=p((Ei,je)=>{"use strict";var Fr=E().zipObject;je.exports=Br;function Br(e,t){let r=0;for(let n=1;n<t.length;++n)r+=Dr(e,t[n-1],t[n]);return r}function Dr(e,t,r){let n=Fr(r,r.map((d,u)=>u)),i=t.flatMap(d=>e.outEdges(d).map(u=>({pos:n[u.w],weight:e.edge(u).weight})).sort((u,h)=>u.pos-h.pos)),l=1;for(;l<r.length;)l<<=1;let o=2*l-1;l-=1;let a=new Array(o).fill(0),s=0;return i.forEach(d=>{let u=d.pos+l;a[u]+=d.weight;let h=0;for(;u>0;)u%2&&(h+=a[u+1]),u=u-1>>1,a[u]+=d.weight;s+=d.weight*h}),s}});var Se=p((gi,_e)=>{_e.exports=Yr;function Yr(e,t=[]){return t.map(r=>{let n=e.inEdges(r);if(n.length){let i=n.reduce((l,o)=>{let a=e.edge(o),s=e.node(o.v);return{sum:l.sum+a.weight*s.order,weight:l.weight+a.weight}},{sum:0,weight:0});return{v:r,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:r}})}});var Ge=p((vi,Pe)=>{"use strict";var Ar=E();Pe.exports=Wr;function Wr(e,t){let r={};e.forEach((i,l)=>{let o=r[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:l};i.barycenter!==void 0&&(o.barycenter=i.barycenter,o.weight=i.weight)}),t.edges().forEach(i=>{let l=r[i.v],o=r[i.w];l!==void 0&&o!==void 0&&(o.indegree++,l.out.push(r[i.w]))});let n=Object.values(r).filter(i=>!i.indegree);return zr(n)}function zr(e){let t=[];function r(i){return l=>{l.merged||(l.barycenter===void 0||i.barycenter===void 0||l.barycenter>=i.barycenter)&&Xr(i,l)}}function n(i){return l=>{l.in.push(i),--l.indegree===0&&e.push(l)}}for(;e.length;){let i=e.pop();t.push(i),i.in.reverse().forEach(r(i)),i.out.forEach(n(i))}return t.filter(i=>!i.merged).map(i=>Ar.pick(i,["vs","i","barycenter","weight"]))}function Xr(e,t){let r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}});var Be=p((ki,Fe)=>{var Ur=E();Fe.exports=Hr;function Hr(e,t){let r=Ur.partition(e,u=>Object.hasOwn(u,"barycenter")),n=r.lhs,i=r.rhs.sort((u,h)=>h.i-u.i),l=[],o=0,a=0,s=0;n.sort(Jr(!!t)),s=Ve(l,i,s),n.forEach(u=>{s+=u.vs.length,l.push(u.vs),o+=u.barycenter*u.weight,a+=u.weight,s=Ve(l,i,s)});let d={vs:l.flat(!0)};return a&&(d.barycenter=o/a,d.weight=a),d}function Ve(e,t,r){let n;for(;t.length&&(n=t[t.length-1]).i<=r;)t.pop(),e.push(n.vs),r++;return r}function Jr(e){return(t,r)=>t.barycenter<r.barycenter?-1:t.barycenter>r.barycenter?1:e?r.i-t.i:t.i-r.i}});var Ae=p((xi,Ye)=>{var De=Se(),Kr=Ge(),Qr=Be();Ye.exports=Zr;function Zr(e,t,r,n){let i=[],l=[t];for(;l.length>0;){let a=l.pop();i.push(a);let s=e.children(a),d=e.node(a),u=d?d.borderLeft:void 0;u&&(s=s.filter(f=>f!==u&&f!==d.borderRight));let h=De(e,s);for(let f=h.length-1;f>=0;f--)e.children(h[f].v).length&&l.push(h[f].v)}let o={};for(let a=i.length-1;a>=0;a--){let s=i[a],d=e.children(s),u=e.node(s),h=u?u.borderLeft:void 0,f=u?u.borderRight:void 0,c={};h&&(d=d.filter(g=>g!==h&&g!==f));let b=De(e,d);b.forEach(g=>{if(e.children(g.v).length){let x=o[g.v];c[g.v]=x,Object.hasOwn(x,"barycenter")&&en(g,x)}});let m=Kr(b,r);$r(m,c);let w=Qr(m,n);if(h&&(w.vs=[h,w.vs,f].flat(!0),e.predecessors(h).length)){let g=e.node(e.predecessors(h)[0]),x=e.node(e.predecessors(f)[0]);Object.hasOwn(w,"barycenter")||(w.barycenter=0,w.weight=0),w.barycenter=(w.barycenter*w.weight+g.order+x.order)/(w.weight+2),w.weight+=2}o[s]=w}return o[t]}function $r(e,t){e.forEach(r=>{r.vs=r.vs.flatMap(n=>t[n]?t[n].vs:n)})}function en(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}});var ze=p((yi,We)=>{var tn=require("@dagrejs/graphlib").Graph,rn=E();We.exports=nn;function nn(e,t,r,n){n||(n=e.nodes());let i=on(e),l=new tn({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(o=>e.node(o));return n.forEach(o=>{let a=e.node(o),s=e.parent(o);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(l.setNode(o),l.setParent(o,s||i),e[r](o).forEach(d=>{let u=d.v===o?d.w:d.v,h=l.edge(u,o),f=h!==void 0?h.weight:0;l.setEdge(u,o,{weight:e.edge(d).weight+f})}),Object.hasOwn(a,"minRank")&&l.setNode(o,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),l}function on(e){for(var t;e.hasNode(t=rn.uniqueId("_root")););return t}});var Ue=p((Ni,Xe)=>{Xe.exports=ln;function ln(e,t,r){let n={},i;r.forEach(l=>{let o=e.parent(l),a,s;for(;o;){if(a=e.parent(o),a?(s=n[a],n[a]=o):(s=i,i=o),s&&s!==o){t.setEdge(s,o);return}o=a}})}});var Ze=p((Oi,Qe)=>{"use strict";var an=Me(),sn=Te(),dn=Ae(),un=ze(),hn=Ue(),fn=require("@dagrejs/graphlib").Graph,L=E();Qe.exports=Ke;function Ke(e,t={}){if(typeof t.customOrder=="function"){t.customOrder(e,Ke);return}let r=L.maxRank(e),n=He(e,L.range(1,r+1),"inEdges"),i=He(e,L.range(r-1,-1,-1),"outEdges"),l=an(e);if(Je(e,l),t.disableOptimalOrderHeuristic)return;let o=Number.POSITIVE_INFINITY,a,s=t.constraints||[];for(let d=0,u=0;u<4;++d,++u){cn(d%2?n:i,d%4>=2,s),l=L.buildLayerMatrix(e);let h=sn(e,l);h<o?(u=0,a=Object.assign({},l),o=h):h===o&&(a=structuredClone(l))}Je(e,a)}function He(e,t,r){let n=new Map,i=(l,o)=>{n.has(l)||n.set(l,[]),n.get(l).push(o)};for(let l of e.nodes()){let o=e.node(l);if(typeof o.rank=="number"&&i(o.rank,l),typeof o.minRank=="number"&&typeof o.maxRank=="number")for(let a=o.minRank;a<=o.maxRank;a++)a!==o.rank&&i(a,l)}return t.map(function(l){return un(e,l,r,n.get(l)||[])})}function cn(e,t,r){let n=new fn;e.forEach(function(i){r.forEach(a=>n.setEdge(a.left,a.right));let l=i.graph().root,o=dn(i,l,n,t);o.vs.forEach((a,s)=>i.node(a).order=s),hn(i,n,o.vs)})}function Je(e,t){Object.values(t).forEach(r=>r.forEach((n,i)=>e.node(n).order=i))}});var st=p((Ii,at)=>{"use strict";var pn=require("@dagrejs/graphlib").Graph,k=E();at.exports={positionX:wn,findType1Conflicts:$e,findType2Conflicts:et,addConflict:V,hasConflict:tt,verticalAlignment:rt,horizontalCompaction:nt,alignCoordinates:ot,findSmallestWidthAlignment:it,balance:lt};function $e(e,t){let r={};function n(i,l){let o=0,a=0,s=i.length,d=l[l.length-1];return l.forEach((u,h)=>{let f=mn(e,u),c=f?e.node(f).order:s;(f||u===d)&&(l.slice(a,h+1).forEach(b=>{e.predecessors(b).forEach(m=>{let w=e.node(m),g=w.order;(g<o||c<g)&&!(w.dummy&&e.node(b).dummy)&&V(r,m,b)})}),a=h+1,o=c)}),l}return t.length&&t.reduce(n),r}function et(e,t){let r={};function n(l,o,a,s,d){let u;k.range(o,a).forEach(h=>{u=l[h],e.node(u).dummy&&e.predecessors(u).forEach(f=>{let c=e.node(f);c.dummy&&(c.order<s||c.order>d)&&V(r,f,u)})})}function i(l,o){let a=-1,s,d=0;return o.forEach((u,h)=>{if(e.node(u).dummy==="border"){let f=e.predecessors(u);f.length&&(s=e.node(f[0]).order,n(o,d,h,a,s),d=h,a=s)}n(o,d,o.length,s,l.length)}),o}return t.length&&t.reduce(i),r}function mn(e,t){if(e.node(t).dummy)return e.predecessors(t).find(r=>e.node(r).dummy)}function V(e,t,r){if(t>r){let i=t;t=r,r=i}let n=e[t];n||(e[t]=n={}),n[r]=!0}function tt(e,t,r){if(t>r){let n=t;t=r,r=n}return!!e[t]&&Object.hasOwn(e[t],r)}function rt(e,t,r,n){let i={},l={},o={};return t.forEach(a=>{a.forEach((s,d)=>{i[s]=s,l[s]=s,o[s]=d})}),t.forEach(a=>{let s=-1;a.forEach(d=>{let u=n(d);if(u.length){u=u.sort((f,c)=>o[f]-o[c]);let h=(u.length-1)/2;for(let f=Math.floor(h),c=Math.ceil(h);f<=c;++f){let b=u[f];l[d]===d&&s<o[b]&&!tt(r,d,b)&&(l[b]=d,l[d]=i[d]=i[b],s=o[b])}}})}),{root:i,align:l}}function nt(e,t,r,n,i){let l={},o=bn(e,t,r,i),a=i?"borderLeft":"borderRight";function s(h,f){let c=o.nodes().slice(),b={},m=c.pop();for(;m;){if(b[m])h(m);else{b[m]=!0,c.push(m);for(let w of f(m))c.push(w)}m=c.pop()}}function d(h){l[h]=o.inEdges(h).reduce((f,c)=>Math.max(f,l[c.v]+o.edge(c)),0)}function u(h){let f=o.outEdges(h).reduce((b,m)=>Math.min(b,l[m.w]-o.edge(m)),Number.POSITIVE_INFINITY),c=e.node(h);f!==Number.POSITIVE_INFINITY&&c.borderType!==a&&(l[h]=Math.max(l[h],f))}return s(d,o.predecessors.bind(o)),s(u,o.successors.bind(o)),Object.keys(n).forEach(h=>l[h]=l[r[h]]),l}function bn(e,t,r,n){let i=new pn,l=e.graph(),o=En(l.nodesep,l.edgesep,n);return t.forEach(a=>{let s;a.forEach(d=>{let u=r[d];if(i.setNode(u),s){var h=r[s],f=i.edge(h,u);i.setEdge(h,u,Math.max(o(e,d,s),f||0))}s=d})}),i}function it(e,t){return Object.values(t).reduce((r,n)=>{let i=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;Object.entries(n).forEach(([a,s])=>{let d=gn(e,a)/2;i=Math.max(s+d,i),l=Math.min(s-d,l)});let o=i-l;return o<r[0]&&(r=[o,n]),r},[Number.POSITIVE_INFINITY,null])[1]}function ot(e,t){let r=Object.values(t),n=k.applyWithChunking(Math.min,r),i=k.applyWithChunking(Math.max,r);["u","d"].forEach(l=>{["l","r"].forEach(o=>{let a=l+o,s=e[a];if(s===t)return;let d=Object.values(s),u=n-k.applyWithChunking(Math.min,d);o!=="l"&&(u=i-k.applyWithChunking(Math.max,d)),u&&(e[a]=k.mapValues(s,h=>h+u))})})}function lt(e,t){return k.mapValues(e.ul,(r,n)=>{if(t)return e[t.toLowerCase()][n];{let i=Object.values(e).map(l=>l[n]).sort((l,o)=>l-o);return(i[1]+i[2])/2}})}function wn(e){let t=k.buildLayerMatrix(e),r=Object.assign($e(e,t),et(e,t)),n={},i;["u","d"].forEach(o=>{i=o==="u"?t:Object.values(t).reverse(),["l","r"].forEach(a=>{a==="r"&&(i=i.map(h=>Object.values(h).reverse()));let s=(o==="u"?e.predecessors:e.successors).bind(e),d=rt(e,i,r,s),u=nt(e,i,d.root,d.align,a==="r");a==="r"&&(u=k.mapValues(u,h=>-h)),n[o+a]=u})});let l=it(e,n);return ot(n,l),lt(n,e.graph().align)}function En(e,t,r){return(n,i,l)=>{let o=n.node(i),a=n.node(l),s=0,d;if(s+=o.width/2,Object.hasOwn(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":d=-o.width/2;break;case"r":d=o.width/2;break}if(d&&(s+=r?d:-d),d=0,s+=(o.dummy?t:e)/2,s+=(a.dummy?t:e)/2,s+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":d=a.width/2;break;case"r":d=-a.width/2;break}return d&&(s+=r?d:-d),d=0,s}}function gn(e,t){return e.node(t).width}});var ht=p((qi,ut)=>{"use strict";var dt=E(),vn=st().positionX;ut.exports=kn;function kn(e){e=dt.asNonCompoundGraph(e),xn(e),Object.entries(vn(e)).forEach(([t,r])=>e.node(t).x=r)}function xn(e){let t=dt.buildLayerMatrix(e),r=e.graph().ranksep,n=e.graph().rankalign,i=0;t.forEach(l=>{let o=l.reduce((a,s)=>{let d=e.node(s).height;return a>d?a:d},0);l.forEach(a=>{let s=e.node(a);n==="top"?s.y=i+s.height/2:n==="bottom"?s.y=i+o-s.height/2:s.y=i+o/2}),i+=o+r})}});var Et=p((Li,wt)=>{"use strict";var ft=te(),ct=ne(),yn=we(),Nn=E().normalizeRanks,On=ge(),In=E().removeEmptyRanks,pt=ke(),qn=Ne(),mt=Le(),Ln=Ze(),Rn=ht(),v=E(),Cn=require("@dagrejs/graphlib").Graph;wt.exports=Mn;function Mn(e,t={}){let r=t.debugTiming?v.time:v.notime;return r("layout",()=>{let n=r("  buildLayoutGraph",()=>Dn(e));return r("  runLayout",()=>jn(n,r,t)),r("  updateInputGraph",()=>Tn(e,n)),n})}function jn(e,t,r){t("    makeSpaceForEdgeLabels",()=>Yn(e)),t("    removeSelfEdges",()=>Qn(e)),t("    acyclic",()=>ft.run(e)),t("    nestingGraph.run",()=>pt.run(e)),t("    rank",()=>yn(v.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>An(e)),t("    removeEmptyRanks",()=>In(e)),t("    nestingGraph.cleanup",()=>pt.cleanup(e)),t("    normalizeRanks",()=>Nn(e)),t("    assignRankMinMax",()=>Wn(e)),t("    removeEdgeLabelProxies",()=>zn(e)),t("    normalize.run",()=>ct.run(e)),t("    parentDummyChains",()=>On(e)),t("    addBorderSegments",()=>qn(e)),t("    order",()=>Ln(e,r)),t("    insertSelfEdges",()=>Zn(e)),t("    adjustCoordinateSystem",()=>mt.adjust(e)),t("    position",()=>Rn(e)),t("    positionSelfEdges",()=>$n(e)),t("    removeBorderNodes",()=>Kn(e)),t("    normalize.undo",()=>ct.undo(e)),t("    fixupEdgeLabelCoords",()=>Hn(e)),t("    undoCoordinateSystem",()=>mt.undo(e)),t("    translateGraph",()=>Xn(e)),t("    assignNodeIntersects",()=>Un(e)),t("    reversePoints",()=>Jn(e)),t("    acyclic.undo",()=>ft.undo(e))}function Tn(e,t){e.nodes().forEach(r=>{let n=e.node(r),i=t.node(r);n&&(n.x=i.x,n.y=i.y,n.order=i.order,n.rank=i.rank,t.children(r).length&&(n.width=i.width,n.height=i.height))}),e.edges().forEach(r=>{let n=e.edge(r),i=t.edge(r);n.points=i.points,Object.hasOwn(i,"x")&&(n.x=i.x,n.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var _n=["nodesep","edgesep","ranksep","marginx","marginy"],Sn={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb",rankalign:"center"},Pn=["acyclicer","ranker","rankdir","align","rankalign"],Gn=["width","height","rank"],bt={width:0,height:0},Vn=["minlen","weight","width","height","labeloffset"],Fn={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Bn=["labelpos"];function Dn(e){let t=new Cn({multigraph:!0,compound:!0}),r=B(e.graph());return t.setGraph(Object.assign({},Sn,F(r,_n),v.pick(r,Pn))),e.nodes().forEach(n=>{let i=B(e.node(n)),l=F(i,Gn);Object.keys(bt).forEach(o=>{l[o]===void 0&&(l[o]=bt[o])}),t.setNode(n,l),t.setParent(n,e.parent(n))}),e.edges().forEach(n=>{let i=B(e.edge(n));t.setEdge(n,Object.assign({},Fn,F(i,Vn),v.pick(i,Bn)))}),t}function Yn(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(r=>{let n=e.edge(r);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function An(e){e.edges().forEach(t=>{let r=e.edge(t);if(r.width&&r.height){let n=e.node(t.v),l={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};v.addDummyNode(e,"edge-proxy",l,"_ep")}})}function Wn(e){let t=0;e.nodes().forEach(r=>{let n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=Math.max(t,n.maxRank))}),e.graph().maxRank=t}function zn(e){e.nodes().forEach(t=>{let r=e.node(t);r.dummy==="edge-proxy"&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}function Xn(e){let t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,i=0,l=e.graph(),o=l.marginx||0,a=l.marginy||0;function s(d){let u=d.x,h=d.y,f=d.width,c=d.height;t=Math.min(t,u-f/2),r=Math.max(r,u+f/2),n=Math.min(n,h-c/2),i=Math.max(i,h+c/2)}e.nodes().forEach(d=>s(e.node(d))),e.edges().forEach(d=>{let u=e.edge(d);Object.hasOwn(u,"x")&&s(u)}),t-=o,n-=a,e.nodes().forEach(d=>{let u=e.node(d);u.x-=t,u.y-=n}),e.edges().forEach(d=>{let u=e.edge(d);u.points.forEach(h=>{h.x-=t,h.y-=n}),Object.hasOwn(u,"x")&&(u.x-=t),Object.hasOwn(u,"y")&&(u.y-=n)}),l.width=r-t+o,l.height=i-n+a}function Un(e){e.edges().forEach(t=>{let r=e.edge(t),n=e.node(t.v),i=e.node(t.w),l,o;r.points?(l=r.points[0],o=r.points[r.points.length-1]):(r.points=[],l=i,o=n),r.points.unshift(v.intersectRect(n,l)),r.points.push(v.intersectRect(i,o))})}function Hn(e){e.edges().forEach(t=>{let r=e.edge(t);if(Object.hasOwn(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function Jn(e){e.edges().forEach(t=>{let r=e.edge(t);r.reversed&&r.points.reverse()})}function Kn(e){e.nodes().forEach(t=>{if(e.children(t).length){let r=e.node(t),n=e.node(r.borderTop),i=e.node(r.borderBottom),l=e.node(r.borderLeft[r.borderLeft.length-1]),o=e.node(r.borderRight[r.borderRight.length-1]);r.width=Math.abs(o.x-l.x),r.height=Math.abs(i.y-n.y),r.x=l.x+r.width/2,r.y=n.y+r.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Qn(e){e.edges().forEach(t=>{if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Zn(e){var t=v.buildLayerMatrix(e);t.forEach(r=>{var n=0;r.forEach((i,l)=>{var o=e.node(i);o.order=l+n,(o.selfEdges||[]).forEach(a=>{v.addDummyNode(e,"selfedge",{width:a.label.width,height:a.label.height,rank:o.rank,order:l+ ++n,e:a.e,label:a.label},"_se")}),delete o.selfEdges})})}function $n(e){e.nodes().forEach(t=>{var r=e.node(t);if(r.dummy==="selfedge"){var n=e.node(r.e.v),i=n.x+n.width/2,l=n.y,o=r.x-i,a=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:i+2*o/3,y:l-a},{x:i+5*o/6,y:l-a},{x:i+o,y:l},{x:i+5*o/6,y:l+a},{x:i+2*o/3,y:l+a}],r.label.x=r.x,r.label.y=r.y}})}function F(e,t){return v.mapValues(v.pick(e,t),Number)}function B(e){var t={};return e&&Object.entries(e).forEach(([r,n])=>{typeof r=="string"&&(r=r.toLowerCase()),t[r]=n}),t}});var vt=p((Ri,gt)=>{var ei=E(),ti=require("@dagrejs/graphlib").Graph;gt.exports={debugOrdering:ri};function ri(e){let t=ei.buildLayerMatrix(e),r=new ti({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(n=>{r.setNode(n,{label:n}),r.setParent(n,"layer"+e.node(n).rank)}),e.edges().forEach(n=>r.setEdge(n.v,n.w,{},n.name)),t.forEach((n,i)=>{let l="layer"+i;r.setNode(l,{rank:"same"}),n.reduce((o,a)=>(r.setEdge(o,a,{style:"invis"}),a))}),r}});var xt=p((Ci,kt)=>{kt.exports="2.0.5-pre"});module.exports={graphlib:require("@dagrejs/graphlib"),layout:Et(),debug:vt(),util:{time:E().time,notime:E().notime},version:xt()};
/*! For license information please see dagre.cjs.js.LEGAL.txt */
//# sourceMappingURL=dagre.cjs.js.map
